async function showInterest(serviceId) {
  const currentUserUid = currentUser?.uid;
  if (!currentUserUid) {
    showCustomAlert("‚ö†Ô∏è Please log in to show interest.");
    return;
  }

  // Show the loading spinner while processing the request
  document.getElementById("loadingSpinner").style.display = "flex";

  try {
    const serviceRef = servicesRef.doc(serviceId);
    const serviceDoc = await serviceRef.get();

    if (!serviceDoc.exists) {
      console.error("Service not found.");
      showCustomAlert("‚ùå Service not found.");
      return;
    }

    const serviceData = serviceDoc.data();
    const interestedUsers = serviceData.interestedUsers || [];

    if (interestedUsers.includes(currentUserUid)) {
      showCustomAlert("‚úÖ You've already shown interest in this service.");
      return;
    }

    interestedUsers.push(currentUserUid);
    await serviceRef.update({ interestedUsers });

    const posterId = serviceData.postedBy;
    if (posterId && posterId !== currentUserUid) {
      await db.collection("alerts").add({
        title: "üìå New Interest in Your Service",
        message: `${currentUser.displayName || "Someone"} is interested in your service: ${serviceData.name || "Unnamed Service"}`,
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
        targetUserId: posterId,
        section: "services",
        relatedId: serviceId
      });
    }

    const updatedInterestCount = interestedUsers.length;
    const interestCountElement = document.getElementById(`interest-count-${serviceId}`);
    if (interestCountElement) {
      interestCountElement.textContent = `${updatedInterestCount} ${updatedInterestCount === 1 ? "person" : "people"} interested`;
    }

    showCustomAlert("üéâ Your interest has been registered successfully!");

  } catch (error) {
    console.error("‚ùå Error showing interest:", error.message || error);
    showCustomAlert("Something went wrong. Please try again.");
  } finally {
    // Hide the loading spinner after operation completes
    document.getElementById("loadingSpinner").style.display = "none";
  }
}
